"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var config_1 = require("../config");
function default_1(options) {
    options.url = config_1.baseUrl + options.url;
    options.header = options.header || {};
    options.header.Authorization = wx.getStorageSync('authorization');
    var oldFail = options.fail;
    var oldSuccess = options.success;
    options.success = function (data) {
        if (data.data.errcode) {
            oldFail && oldFail({ errMsg: data.data.errmsg, errCode: data.data.errcode });
            return;
        }
        oldSuccess && oldSuccess(data.data);
    };
    wx.request(options);
}
exports.default = default_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlcXVlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxvQ0FBb0M7QUFLcEMsbUJBQXlCLE9BQStCO0lBQ3BELE9BQU8sQ0FBQyxHQUFHLEdBQUcsZ0JBQU8sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDO0lBQ3BDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUE7SUFDckMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsQ0FBQTtJQUNqRSxJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFBO0lBQzVCLElBQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUE7SUFDbEMsT0FBTyxDQUFDLE9BQU8sR0FBRyxVQUFVLElBQVM7UUFDakMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNuQixPQUFPLElBQUksT0FBTyxDQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUE7WUFDNUUsT0FBTTtTQUNUO1FBQ0QsVUFBVSxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDeEMsQ0FBQyxDQUFBO0lBQ0QsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN4QixDQUFDO0FBZEQsNEJBY0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiYXNlVXJsIH0gZnJvbSBcIi4uL2NvbmZpZ1wiO1xuLyoqXG4gKiByZXF1ZXN0IOWMheijheaWueazlVxuICogQHBhcmFtIG9wdGlvbnMgXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChvcHRpb25zOiB3eC5SZXF1ZXN0T3B0aW9uIHwgYW55KSB7XG4gICAgb3B0aW9ucy51cmwgPSBiYXNlVXJsICsgb3B0aW9ucy51cmw7XG4gICAgb3B0aW9ucy5oZWFkZXIgPSBvcHRpb25zLmhlYWRlciB8fCB7fVxuICAgIG9wdGlvbnMuaGVhZGVyLkF1dGhvcml6YXRpb24gPSB3eC5nZXRTdG9yYWdlU3luYygnYXV0aG9yaXphdGlvbicpXG4gICAgY29uc3Qgb2xkRmFpbCA9IG9wdGlvbnMuZmFpbFxuICAgIGNvbnN0IG9sZFN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3NcbiAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZGF0YTogYW55KSB7XG4gICAgICAgIGlmIChkYXRhLmRhdGEuZXJyY29kZSkge1xuICAgICAgICAgICAgb2xkRmFpbCAmJiBvbGRGYWlsKHsgZXJyTXNnOiBkYXRhLmRhdGEuZXJybXNnLCBlcnJDb2RlOiBkYXRhLmRhdGEuZXJyY29kZSB9KVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgb2xkU3VjY2VzcyAmJiBvbGRTdWNjZXNzKGRhdGEuZGF0YSk7XG4gICAgfVxuICAgIHd4LnJlcXVlc3Qob3B0aW9ucyk7XG59Il19